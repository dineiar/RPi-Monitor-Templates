########################################################################
# Extract Deluge information
#  Page: 1
#  Information               Status     Statistics
#  - Status                  - yes      - no
#  - Total upload            - yes      - yes
#  - Total download          - yes      - yes
########################################################################

dynamic.1.name=deluged_service_status
dynamic.1.source=service deluged status | grep "Active: "
dynamic.1.regexp=\((.*)\)
dynamic.2.name=deluged_service_runtime
dynamic.2.source=service deluged status | grep "Active: "
dynamic.2.regexp=; (.*)

dynamic.3.name=deluged_current_download
# In bytes, generated by deluge.py
dynamic.3.source=/usr/share/rpimonitor/web/addons/deluge/download_rate.txt
# convert to kbytes
dynamic.3.postprocess=$1/1000
dynamic.3.rrd=GAUGE
dynamic.3.default=0
dynamic.3.min=0
dynamic.3.interval=12 # Collect once every 2 minutes

dynamic.4.name=deluged_current_upload
# In bytes, generated by deluge.py
dynamic.4.source=/usr/share/rpimonitor/web/addons/deluge/upload_rate.txt
# convert to kbytes
dynamic.4.postprocess=$1/1000
dynamic.4.rrd=GAUGE
dynamic.3.default=0
dynamic.4.min=0
dynamic.4.interval=12 # Collect once every 2 minutes


web.status.1.content.1.title="Deluge"
web.status.1.content.1.icon=deluge.png
web.status.1.content.1.line.1="<b>Status</b>: "+ Label(data.deluged_service_status,"=='running'","OK ("+data.deluged_service_runtime+")","success")+Label(data.deluged_service_status,"!='running'","Off","danger")
web.status.1.content.1.line.2="Download: <b>"+KMG(data.deluged_current_download, 'k') + "<i class='glyphicon glyphicon-arrow-down'></i></b>Upload: <b>"+KMG(data.deluged_current_upload, 'k')+"<i class='glyphicon glyphicon-arrow-up'></i></b>"
web.status.1.content.1.line.3=InsertHTML("/addons/deluge/torrents_home.html")


web.statistics.1.content.1.title="Deluge"
web.statistics.1.content.1.graph.1=deluged_current_download
web.statistics.1.content.1.graph.2=deluged_current_upload
web.statistics.1.content.1.ds_graph_options.deluged_current_download.label=Download
web.statistics.1.content.1.ds_graph_options.deluged_current_download.color="#FF7777"
web.statistics.1.content.1.ds_graph_options.deluged_current_upload.label=Upload
web.statistics.1.content.1.ds_graph_options.deluged_current_upload.color="#7777FF"